{{#if @useNewListingLayout}}
  <div class="sf-listing-sub-form au-o-box">
    {{#if
      (or
        @subForm.itemLabel
        @canMoveUp
        @canMoveDown
        @canRemove
        @subForm.isCollapsible
      )
    }}
      <AuToolbar @size={{this.size}} as |Group|>
        <Group class="au-u-flex--vertical-center">
          {{#if (or @canMoveUp @canMoveDown)}}
            <this.OrderButtonGroup
              @canMoveUp={{@canMoveUp}}
              @canMoveDown={{@canMoveDown}}
              @moveUp={{@moveUp}}
              @moveDown={{@moveDown}}
              class="au-u-flex-self-start"
            />
          {{/if}}
          {{#if @subForm.itemLabel}}
            <AuHeading
              @level={{this.titleLevel}}
              @skin={{this.titleSkin}}
              {{on "click" this.toggleCollapsed}}
            >
              {{@subForm.itemLabel}}
            </AuHeading>
          {{/if}}
          {{#if @subForm.isCollapsible}}
            <AuButton
              @skin="naked"
              @text={{if this.collapsed "Show" "Hide"}}
              @hideText={{true}}
              @icon={{if this.collapsed "chevron-right" "chevron-down"}}
              {{on "click" this.toggleCollapsed}}
            />
          {{/if}}
          {{#if (and @subForm.isCollapsible this.collapsed)}}
            {{! for non screenreader users, we still want the muted text to be clickable too}}
            {{! template-lint-disable no-invalid-interactive  }}
            <div
              class="au-u-muted"
              {{on "click" this.toggleCollapsed}}
            >{{this.collapsedLabel}}</div>
          {{/if}}
        </Group>
        {{#if @canRemove}}
          <Group>
            <AuButton
              @skin="naked"
              @icon="bin"
              @iconAlignment="left"
              @alert={{true}}
              {{on "click" (fn @onRemoveEntry @sourceNode)}}
            >
              {{@subForm.removeLabel}}
            </AuButton>
          </Group>
        {{/if}}
      </AuToolbar>
    {{/if}}

    <div class="au-o-flow {{if this.collapsed 'au-u-hidden'}}">
      {{#each this.propertyGroups as |group|}}
        <PropertyGroup
          @form={{@subForm.uri}}
          @group={{group}}
          @formStore={{@formStore}}
          @graphs={{@graphs}}
          @sourceNode={{@sourceNode}}
          @forceShowErrors={{@forceShowErrors}}
          @cacheConditionals={{@cacheConditionals}}
          @last={{this.isLast this.propertyGroups group}}
          @show={{@show}}
          @level={{this.nextLevel}}
          @useNewListingLayout={{true}}
        />
      {{/each}}
    </div>
  </div>
{{else}}
  {{#if @subForm.itemLabel}}
    <div
      class="au-u-margin-bottom-small
        {{if (or @canMoveUp @canMoveDown) 'au-u-flex'}}"
    >
      {{#if (or @canMoveUp @canMoveDown)}}
        <this.OrderButtonGroup
          @canMoveUp={{@canMoveUp}}
          @canMoveDown={{@canMoveDown}}
          @moveUp={{@moveUp}}
          @moveDown={{@moveDown}}
          class="au-u-flex-self-start au-u-margin-right-small"
        />
      {{/if}}
      <AuHeading @level={{this.titleLevel}} @skin={{this.titleSkin}}>
        {{@subForm.itemLabel}}
      </AuHeading>
    </div>
  {{/if}}

  <div class="au-o-grid">
    <div class="au-o-flow au-o-grid__item au-u-4-5">
      {{#each this.propertyGroups as |group|}}
        <PropertyGroup
          @form={{@subForm.uri}}
          @group={{group}}
          @formStore={{@formStore}}
          @graphs={{@graphs}}
          @sourceNode={{@sourceNode}}
          @forceShowErrors={{@forceShowErrors}}
          @cacheConditionals={{@cacheConditionals}}
          @last={{this.isLast this.propertyGroups group}}
          @show={{@show}}
          @level={{@level}}
        />
      {{/each}}
    </div>

    {{#if @canRemove}}
      <div class="au-o-grid__item au-u-1-5">
        <AuButton
          @skin="link"
          @icon="bin"
          @iconAlignment="left"
          {{on "click" (fn @onRemoveEntry @sourceNode)}}
        >
          {{@subForm.removeLabel}}
        </AuButton>
      </div>
    {{/if}}
  </div>
{{/if}}
